function s(e){return new Promise(o=>(fetch("/api/V1/post/"+e).then(t=>{if(t.status==200)return t.json()}).then(t=>o(t)),!0))}function y(e){return new Promise(o=>(fetch("/api/V1/post-category/"+e).then(t=>{if(t.status==200)return t.json()}).then(t=>o(t)),!0))}async function S(){var r,i;const e=new URLSearchParams(window.location.href);(r=document.querySelectorAll(".alert.alert-danger"))==null||r.forEach(n=>n.remove());const o=e.getAll("p").toString();if(o&&o!="new"){const n=document.querySelector("#editPost"),c=document.querySelector("#newPost");a(n),a(c);const l=await s(o);l||(window.location.href=window.location.origin+window.location.pathname),d(n,l),n.style="display: block",c.style="display: none"}else{const n=document.querySelector("#editPost"),c=document.querySelector("#newPost");a(n),a(c),n.style="display: none",c.style="display: block",(i=document.querySelector("#newPost form .ck"))==null||i.remove(),ClassicEditor.create(document.querySelector("#newPost form #description")).catch(l=>{console.error(l)})}const t=e.getAll("c").toString();if(t&&t!="new"){const n=await y(t);m(n),document.querySelector("#editCategory").style="display: block",document.querySelector("#newCategory").style="display: none"}else document.querySelector("#editCategory").style="display: none",document.querySelector("#newCategory").style="display: block";document.querySelector("#loaderPage").style="visibility:hidden;"}async function g(){const e=new URLSearchParams(window.location.href),o=e.getAll("p").toString();if(o){const r=document.querySelector("#editPost"),i=document.querySelector("#newPost"),n=e.getAll("d").toString();let c=[];n&&decodeURIComponent(atob(n)).replaceAll("+"," ").split(`
`).forEach(w=>{const u=w.split("=");c[u[0]]=u[1]});const l=document.querySelector("#modal-post");var t=new bootstrap.Modal(l);o==="new"?(Object.keys(c).length>0&&d(i,c),r.style="display: none",i.style="display: block"):(await s(o)||(window.location.href=window.location.origin+window.location.pathname),Object.keys(c).length==0&&(c=await s(o)),d(r,c),r.style="display: block",i.style="display: none"),t.show()}}function d(e,o){var t;o.id&&(e.querySelector("form").action="/posts/"+o.id),e.querySelector("form #title").value=o.title,e.querySelector("form #description").value=o.description,(t=e.querySelector("form .ck"))==null||t.remove(),ClassicEditor.create(e.querySelector("form #description")).then(r=>window.editor=r).catch(r=>{console.error(r)}),o.urlImage&&(e.querySelector("form img").src=o.urlImage),e.querySelector("form #category").value=o.post_category_id}function a(e){e.querySelector("form #title").value="",e.querySelector("form #description").value="",e.querySelector("form #category").value=""}async function q(){const o=new URLSearchParams(window.location.href).getAll("c").toString();if(o){const r=document.querySelector("#modal-category");var t=new bootstrap.Modal(r);if(console.log(o),o=="new")document.querySelector("#editCategory").style="display: none",document.querySelector("#newCategory").style="display: block";else{const i=await y(o);i||(window.location.href=window.location.origin+window.location.pathname),m(i),document.querySelector("#editCategory").style="display: block",document.querySelector("#newCategory").style="display: none"}t.show()}}function m(e){document.querySelector("#editCategory form").action="/post-categories/"+e.id,document.querySelector("#form_delete_category").action="/post-categories/"+e.id,document.querySelector("#editCategory form #name").value||(document.querySelector("#editCategory form #name").value=e.name),document.querySelectorAll(".modal-body strong").forEach(o=>{o.innerHTML=e.name})}document.addEventListener("DOMContentLoaded",function(e){g(),q(),document.querySelector(".contenedor").onmouseover=function(){document.querySelectorAll(".btnFloat").forEach(t=>{t.classList.add("animacionVer")})},document.querySelector(".contenedor").onmouseout=function(){document.querySelectorAll(".btnFloat").forEach(t=>{t.classList.remove("animacionVer")})},document.querySelectorAll("a").forEach(t=>{t.addEventListener("click",function(){document.querySelector("#loaderPage").style="visibility:visible;",setTimeout(S,1e3)})})});
