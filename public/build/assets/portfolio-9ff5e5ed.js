window.addEventListener("load",()=>{fetch("/api/V1/post").then(n=>n.json()).then(function(n){n.forEach((r,e)=>{const i=e+1,o=document.querySelector(".content-all-blog"),t=o.cloneNode(!0);t.id="post"+i,i>1&&t.classList.add("hidden"),t.href="blog/"+r.id,t.querySelector(".content-blog-img img").src=r.urlImage,t.querySelector(".content-blog-info p b").textContent=r.title,t.querySelector(".content-blog-info p:nth-child(2)").textContent=r.date.split("T")[0],t.querySelector(".content-blog-info p:nth-child(3)").textContent=r.author.toUpperCase(),o.parentElement.appendChild(t),e==0&&o.remove(),t.parentElement.classList.remove("visibility-hidden")})})});function f(n){const r=$("span.content-rotating-text").text();for(let e=0;e<n.length;e++)if(n[e]==r){const o=e+1;if(n[o]){$("span.content-rotating-text").text(n[o]);break}else{$("span.content-rotating-text").text(n[0]);break}}}$(document).ready(function(){var r=$("span.content-rotating-text").text().split(",");$("span.content-rotating-text").text(r[0]),setInterval(()=>{f(r)},3e3);var e=2,i=1,o,t;$("a#next").click(function(a){a.preventDefault(),$("#post"+e).is(":hidden")&&e<=7&&($("#post"+i).addClass("hidden"),$("#post"+e).removeClass("hidden"),o=e,t=i,e<=6&&(e+=1,i+=1))}),$("a#previous").click(function(a){a.preventDefault(),$("#post"+t).is(":hidden")&&o<=7&&($("#post"+o).addClass("hidden"),$("#post"+t).removeClass("hidden"),e=o,i=t,o-=1,t-=1)}),$("a#show-menu").click(function(a){a.preventDefault(),$("header.desktop-header.close.show-menu-desktop").length?($("header.desktop-header").removeClass("show-menu-desktop"),$("header.mobile-header").removeClass("show-menu-mobile"),$("main").removeClass("show-main")):$("header.desktop-header.close").length&&($("header.desktop-header").addClass("show-menu-desktop"),$("header.mobile-header").addClass("show-menu-mobile"),$("main").addClass("show-main"))})});document.querySelector("#contact-form").addEventListener("submit",n=>{var u;n.preventDefault();const r=n.target.querySelector("#name"),e=n.target.querySelector("#email"),i=n.target.querySelector("#subject"),o=n.target.querySelector("#message");(u=n.target.querySelectorAll(".error"))==null||u.forEach(l=>l.remove());let t=!1,a=!0;var p=/^\w+([.-_+]?\w+)*@\w+([.-]?\w+)*(\.\w{2,10})+$/;const s=document.createElement("div");if(s.classList.add("error"),s.textContent="Campo obligatorio",r.value.length==0){let l=s.cloneNode(!0);r.parentElement.appendChild(l),t=!0,a&&(r.focus(),a=!1)}if(e.value.length==0){let l=s.cloneNode(!0);e.parentElement.appendChild(l),t=!0,a&&(e.focus(),a=!1)}if(e.value.length>0&&!p.test(e.value)){let l=s.cloneNode(!0);l.textContent="Correo electrónico inválido",e.parentElement.appendChild(l),t=!0,a&&(e.focus(),a=!1)}if(i.value.length==0){let l=s.cloneNode(!0);i.parentElement.appendChild(l),t=!0,a&&(i.focus(),a=!1)}if(o.value.length==0){let l=s.cloneNode(!0);o.parentElement.appendChild(l),t=!0,a&&(o.focus(),a=!1)}if(t!=!0){var d=new FormData;d.append("fromName",r.value),d.append("fromEmail",e.value),d.append("subject",i.value),d.append("text",o.value);var h={method:"POST",body:d,redirect:"follow"};fetch("/api/portfolio/V1/send-email-contact",h).then(l=>{if(l.status==200){let c=s.cloneNode(!0);return c.classList.remove("error"),c.classList.add("ok"),c.textContent="Mensaje enviado",n.target.appendChild(c),r.value="",e.value="",i.value="",o.value="",setTimeout(()=>{c.remove()},3e3),l.text()}let m=s.cloneNode(!0);return m.textContent="Servicio no disponible",n.target.appendChild(m),l.text()})}});
